(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(65)},44:function(e,t,a){},46:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(29),c=a(16),i=a(4),l=a(5),s=a(7),d=a(6),u=a(8),f=a(2),m=a.n(f),v=a(32),p=a.n(v);function h(e){var t=m()(e).startOf("month").day(0),a=m()(e).endOf("month").day(6).diff(t,"days")+1;return new Array(a).fill(0).map(function(a,r){var n=m()(t).add(r,"d");return{disabled:e.month()!==n.month(),day:n}})}a(44);var y=m.a.weekdaysShort(),b=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={month:m()(),days:h(m()())},a.nextMonth=function(){a.goToMonth(1)},a.previousMonth=function(){a.goToMonth(-1)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.month;return n.a.createElement("div",{className:"Calendar"},n.a.createElement("button",{onClick:this.previousMonth},"<"),n.a.createElement("div",{className:"Calendar-container"},n.a.createElement("div",{className:"Calendar-current-date"},e.format("MMMM YYYY")),n.a.createElement("div",{className:"Calendar-weeks"},y.map(function(e,t){return n.a.createElement("div",{key:t},e)})),n.a.createElement("div",{className:"Calendar-days"},this.renderDays(e))),n.a.createElement("button",{onClick:this.nextMonth},">"))}},{key:"goToMonth",value:function(e){var t=m()(this.state.month).add(e,"M"),a=h(t);this.setState({month:t,days:a})}},{key:"getColors",value:function(e){var t=this.props,a=t.drivers,r=t.trips,n=t.start;if(e>=n){var o=e.diff(n,"days"),c=r[e.format("YYYY-MM-DD")],i=Math.floor(o/7)%a.length,l={day:a[i].colors[2],week:a[i].colors[2]};return c&&(l.day=a[c.driverOfDay].colors[2]),l}}},{key:"renderDays",value:function(e){var t=this;return this.state.days.map(function(e){var a=function(e){return e>0&&e<6}(e.day.days())&&t.getColors(e.day);return n.a.createElement(O,Object.assign({key:e.day.format("DDD")},e,{colors:a,onClick:t.props.onClick}))})}}]),t}(r.Component),O=function(e){var t=e.day,a=e.disabled,r=e.colors,o=e.onClick,c={className:p()("Day",{"is-disabled":a}),onClick:r?o.bind(null,t):function(){return null},style:{background:function(e){return e&&"linear-gradient(180deg, ".concat(e.week," 25%, ").concat(e.day," 25%")}(r)}};return n.a.createElement("div",c,n.a.createElement("span",null,t.date()))},k=b,D=(a(46),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.drivers,a=e.onItemClick;return n.a.createElement("div",{className:"DriversList"},t.map(function(e){return n.a.createElement(E,Object.assign({key:e.name},e,{onClick:a&&a.bind(null,e)}))}))}}]),t}(r.Component)),E=function(e){var t=e.colors,a=e.name,r=e.onClick;return n.a.createElement("div",{className:"Driver-photo",onClick:r,style:{background:t[1],borderColor:t[0]}},n.a.createElement("span",null,a[0]))},j=a(12),g=(a(57),a(59),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.colorDomain,r=e.colorRange;return n.a.createElement("div",{className:"BalanceGraph"},n.a.createElement(j.d,{width:300,height:150,colorDomain:a,colorRange:r},n.a.createElement(j.b,null),n.a.createElement(j.a,{data:t}),n.a.createElement(j.c,{title:"Balance"})))}}]),t}(r.Component)),C="ADD_TRIP";a(61);var M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={modal:!1,selectedDay:null},a.openModal=function(e){a.setState({modal:!0,selectedDay:e})},a.closeModal=function(){a.setState({modal:!1,selectedDay:null})},a.changeDriver=function(e){var t=a.state.selectedDay,r=t.format("YYYY-MM-DD"),n=t.diff(a.props.startOrder,"days"),o=Math.floor(n/7)%a.props.drivers.length;a.props.addTrip(r,e.id,o),a.closeModal()},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.drivers,a=e.graphData,r=e.colorDomain,o=e.colorRange,c=e.trips,i=e.startOrder;return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("h2",null,"Carpooling")),n.a.createElement("main",{className:"App-container"},n.a.createElement(k,{drivers:t,trips:c,start:i,onClick:this.openModal}),n.a.createElement("h3",null,"Drivers"),n.a.createElement(D,{drivers:t}),n.a.createElement(g,{data:a,colorRange:o,colorDomain:r})),this.state.modal&&this.renderModal())}},{key:"renderModal",value:function(){var e=this.props.drivers,t=this.state.selectedDay;return n.a.createElement("div",{className:"Modal"},n.a.createElement("div",{className:"Modal-container"},n.a.createElement("div",null,"Choose a driver for ",t&&t.format("ll")),n.a.createElement(D,{drivers:e,onItemClick:this.changeDriver}),n.a.createElement("button",{onClick:this.closeModal},"Cancel")))}}]),t}(r.Component);var w=Object(c.b)(function(e){var t=e.app,a=t.drivers,r=t.trips,n=t.startOrder,o=a.map(function(e,t){return t}),c=a.map(function(e){return e.colors[1]}),i=Object.keys(r).reduce(function(e,t){var a=r[t];return a.driverOfWeek===a.driverOfDay?e:(e[a.driverOfDay]||(e[a.driverOfDay]=0),e[a.driverOfDay]++,e[a.driverOfWeek]||(e[a.driverOfWeek]=0),e[a.driverOfWeek]--,e)},{});return{colorDomain:o,colorRange:c,graphData:a.map(function(e,t){return{y:t+1,x:i[t]||0,color:t}}),drivers:a,trips:r,startOrder:n}},{addTrip:function(e,t,a){return{type:C,day:e,driverOfDay:t,driverOfWeek:a}}})(M),N=a(11),Y=a(15),A=a(18),R=[["#008394","#00bcd4","#33c9dc"],["#aa2e25","#f44336","#f6685e"],["#357a38","#4caf50","#6fbf73"],["#b28704","#ffc107","#ffcd38"],["#6d1b7b","#9c27b0","#af52bf"],["#b26a00","#ff9800","#ffac33"]],T=[{name:"Daniel",order:4},{name:"Luis",order:3},{name:"Cris",order:2},{name:"Vasco",order:1},{name:"Filipa",order:5}].sort(function(e,t){return e.order-t.order}).map(function(e,t){return Object(A.a)({},e,{id:t,colors:R[t]})}),W={trips:{},startOrder:m()("2018-10-08"),drivers:T},I=Object(N.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TRIP":return Object(A.a)({},e,{trips:Object(A.a)({},e.trips,Object(Y.a)({},t.day,{driverOfDay:t.driverOfDay,driverOfWeek:t.driverOfWeek,day:t.day}))});default:return e}}}),x=Object(N.c)(I);a(63);Object(o.render)(n.a.createElement(c.a,{store:x},n.a.createElement(w,null)),document.getElementById("root"))}},[[34,2,1]]]);
//# sourceMappingURL=main.e88d118b.chunk.js.map